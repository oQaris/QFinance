# QFinance

QFinance — проект, посвящённый разработке и применению нейросетей для торговли на Московской бирже.
В рамках проекта разрабатываются модели на основе алгоритмов обучения с подкреплением
для принятия торговых решений.

Проект включает в себя:

- Анализ финансовых данных, включая технические и фундаментальные индикаторы;
- Разработку и тестирование гипотез для улучшения эффективности торговых стратегий;
- Оптимизацию портфелей и ребалансировку на основе реальных рыночных данных.

Цель проекта — исследовать возможности применения искусственного интеллекта в финансовых рынках
и разработать оптимальные алгоритмы для принятия решений в условиях неопределенности.

Вдохновлён следующими исследованиями:

- https://arxiv.org/abs/1706.10059
- https://github.com/AI4Finance-Foundation/FinRL

### Шаги реализации

- [x] Выгрузка данных Мосбиржи с использованием [Tinkoff Invest API](https://www.tbank.ru/invest/open-api/)
- [x] Расширение котировок техническими индикаторами (см. [StockStats](https://github.com/jealous/stockstats))
- [x] Дополнение датасета фундаментальными индикаторами (парсинг [Finam](https://www.finam.ru/))
- [x] Реализация Среды и Агента из статьи
- [x] Доработки Среды под специфику биржи (лотность акций, комиссия)
- [ ] Эксперименты с RNN
- [ ] Оптимизация гиперпараметров модели
- [ ] Бэктест на брокерском счёте-песочнице
- [ ] Создание обвязки в виде Телеграмм бота с уведомлениями о сделках

### Установка

``` bash
conda update conda
conda create -n sb3 python=3.12
conda activate sb3
python -m pip install --upgrade pip
pip install -r ./requirements.txt
```

#### Загрузка и предобработка данных

1) Добавьте переменную окружения `TOKEN` со значением токена для песочницы,
который можно создать здесь - https://www.tbank.ru/invest/settings/api/
2) Настройте переменные `start_date`, `end_date` и `time_interval`
в файле ***src/data_engine/pipeline.py***
3) Выполните `python pipeline.py`, результаты появятся в директории ***data/pre***

#### Обучение модели

1) Отредактируйте путь до датасета в `src.rl.traint_test.trainer.load_dataset`
2) Выполните `python trainer.py`, результаты появятся в ***src/rl/traint_test/trained_models***
